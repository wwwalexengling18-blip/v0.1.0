version: 1
name: "Gate-to-Gate (Framework)"
description: "Crew-Prozeduren als State Machine. Beispiel-Flow mit realistischen Wartezeiten."
defaults:
  tick_hz: 5.0
  retry: 2
  timeout_s: 45

phases:
  - id: cold_dark
    title: "Cold & Dark"
    steps:
      - id: ensure_connected
        role: SYSTEM
        kind: ensure_connected
        note: "SimConnect/WASim Verbindung prüfen"

      - id: preset_cold_dark
        role: PM
        kind: load_preset
        preset_id: 1
        wait_progress: true
        min_wait_s: 12
        note: "A380X Preset 1 = Cold & Dark. Warten bis Progress 1.0 + Settling"

      - id: tech_walkaround
        role: TECH
        kind: tech_walkaround
        min_wait_s: 20
        note: "Techniker-Check (simuliert + SimVars). Schreibt ins TechLog."

  - id: power_up
    title: "Power-Up (Basic)"
    steps:
      - id: power_ready_guard
        role: PM
        kind: guard
        require:
          - type: simvar_bool
            name: "SIM ON GROUND"
            value: true
        note: "Nur am Boden"

      - id: beacon_on
        role: PM
        kind: action
        action: beacon_on
        verify: null

      - id: pause_settle
        role: SYSTEM
        kind: sleep
        seconds: 8
        note: "Kurzes Settling (Avionik/Displays)"

  - id: end
    title: "Ende"
    steps:
      - id: finish
        role: SYSTEM
        kind: finish
        note: "Fertig ✅"
